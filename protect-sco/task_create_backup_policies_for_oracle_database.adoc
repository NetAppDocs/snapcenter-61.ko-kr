---
permalink: protect-sco/task_create_backup_policies_for_oracle_database.html 
sidebar: sidebar 
keywords: backup policies, policies 
summary: SnapCenter 사용하여 Oracle 데이터베이스 리소스를 백업하기 전에 백업하려는 리소스 또는 리소스 그룹에 대한 백업 정책을 만들어야 합니다.  백업 정책은 백업을 관리, 일정을 정하고 보관하는 방법을 규정하는 일련의 규칙입니다.  복제, 스크립트, 백업 유형 설정도 지정할 수 있습니다.  정책을 만들면 다른 리소스나 리소스 그룹에서 정책을 재사용할 때 시간을 절약할 수 있습니다. 
---
= Oracle 데이터베이스에 대한 백업 정책 생성
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SnapCenter 사용하여 Oracle 데이터베이스 리소스를 백업하기 전에 백업하려는 리소스 또는 리소스 그룹에 대한 백업 정책을 만들어야 합니다.  백업 정책은 백업을 관리, 일정을 정하고 보관하는 방법을 규정하는 일련의 규칙입니다.  복제, 스크립트, 백업 유형 설정도 지정할 수 있습니다.  정책을 만들면 다른 리소스나 리소스 그룹에서 정책을 재사용할 때 시간을 절약할 수 있습니다.

*시작하기 전에*

* 백업 전략을 정의했어야 합니다.
* SnapCenter 설치, 호스트 추가, 데이터베이스 검색, 스토리지 시스템 연결 생성 등의 작업을 완료하여 데이터 보호를 준비했어야 합니다.
* 스냅샷을 미러 또는 볼트 보조 스토리지에 복제하는 경우 SnapCenter 관리자가 소스 및 대상 볼륨 모두에 대한 SVM을 할당해야 합니다.
* 루트가 아닌 사용자로 플러그인을 설치한 경우, prescript 및 postscript 디렉토리에 대한 실행 권한을 수동으로 할당해야 합니다.
* SnapMirror Active Sync의 특정 전제 조건과 제한 사항을 검토하세요. 자세한 내용은 다음을 참조하세요. https://docs.netapp.com/us-en/ontap/smbc/considerations-limits.html#volumes["SnapMirror Active Sync에 대한 개체 제한"] .


.이 작업에 관하여
'특정 기간 동안 백업 사본을 보관합니다' 옵션을 선택한 경우 SnapLock 보관 기간은 언급된 보관 기간보다 짧거나 같아야 합니다.

+ 스냅샷 잠금 기간을 지정하면 보존 기간이 만료될 때까지 스냅샷이 삭제되는 것을 방지할 수 있습니다. 이를 통해 정책에 지정된 수보다 더 많은 수의 스냅샷을 보존할 수 있습니다.

+ ONTAP 9.12.1 이하 버전의 경우 복원의 일부로 SnapLock Vault 스냅샷에서 생성된 복제본은 SnapLock Vault 만료 시간을 상속합니다. 스토리지 관리자는 SnapLock 만료 시간 이후에 복제본을 수동으로 정리해야 합니다.

*단계*

. 왼쪽 탐색 창에서 *설정*을 클릭합니다.
. 설정 페이지에서 *정책*을 클릭합니다.
. 드롭다운 목록에서 *Oracle Database*를 선택합니다.
. *새로 만들기*를 클릭합니다.
. 이름 페이지에서 정책 이름과 세부 정보를 입력합니다.
. 정책 유형 페이지에서 다음 단계를 수행합니다.
+
.. 저장 유형을 선택하세요.
.. 정책 범위 선택:
+
*** *온라인 백업을 생성*하려면 *온라인 백업*을 선택하세요.
+
모든 데이터 파일, 제어 파일, 보관 로그 파일을 백업할지, 데이터 파일과 제어 파일만 백업할지, 또는 보관 로그 파일만 백업할지 지정해야 합니다.

*** *오프라인 백업을 생성하려면* *오프라인 백업*을 선택한 후 다음 옵션 중 하나를 선택하세요.
+
**** 데이터베이스가 마운트된 상태일 때 오프라인 백업을 만들려면 *마운트*를 선택하세요.
**** 데이터베이스를 종료 상태로 변경하여 오프라인 종료 백업을 만들려면 *종료*를 선택합니다.
+
플러그형 데이터베이스(PDB)가 있고 백업을 생성하기 전에 PDB 상태를 저장하려면 *PDB 상태 저장*을 선택해야 합니다.  이렇게 하면 백업이 생성된 후 PDB를 원래 상태로 되돌릴 수 있습니다.





.. Oracle Recovery Manager(RMAN)를 사용하여 백업을 카탈로그화하려면 *Oracle Recovery Manager(RMAN)를 사용하여 백업 카탈로그화*를 선택하세요.
+
GUI를 사용하거나 SnapCenter CLI 명령 Catalog-SmBackupWithOracleRMAN을 사용하여 한 번에 하나의 백업에 대한 지연 카탈로그화를 수행할 수 있습니다.

+

NOTE: RAC 데이터베이스의 백업을 카탈로그화하려면 해당 데이터베이스에 대해 다른 작업이 실행되고 있지 않은지 확인하세요.  다른 작업이 실행 중이면 카탈로그 작업은 대기열에 추가되지 않고 실패합니다.

.. 백업 후 보관 로그를 정리하려면 *백업 후 보관 로그 정리*를 선택하세요.
+

NOTE: 데이터베이스에 구성되지 않은 아카이브 로그 대상에서 아카이브 로그를 정리하는 작업은 건너뜁니다.

+

IMPORTANT: Oracle Standard Edition을 사용하는 경우 아카이브 로그 백업을 수행하는 동안 LOG_ARCHIVE_DEST 및 LOG_ARCHIVE_DUPLEX_DEST 매개변수를 사용할 수 있습니다.

+
*** 백업의 일부로 보관 로그 파일을 선택한 경우에만 보관 로그를 삭제할 수 있습니다.
+

NOTE: 삭제 작업이 성공하려면 RAC 환경의 모든 노드가 모든 보관 로그 위치에 액세스할 수 있어야 합니다.

+
|===
| 만약 당신이 원한다면... | 그 다음에... 


 a| 
모든 보관 로그 삭제
 a| 
*모든 보관 로그 삭제*를 선택합니다.



 a| 
오래된 보관 로그 삭제
 a| 
*다음 기간보다 오래된 보관 로그 삭제*를 선택한 다음, 삭제할 보관 로그의 기간을 일수와 시간 단위로 지정합니다.



 a| 
모든 대상에서 보관 로그 삭제
 a| 
*모든 대상에서 보관 로그 삭제*를 선택합니다.



 a| 
백업의 일부인 로그 대상에서 보관 로그를 삭제합니다.
 a| 
*백업에 포함된 대상에서 보관 로그 삭제*를 선택합니다.

|===
+
image:../media/sco_backuppolicy_prunning.gif["가지치기 정책"]





. 스냅샷 및 복제 페이지에서 다음 단계를 수행합니다.
+
.. *주문형*, *매시간*, *매일*, *매주*, *매월* 중에서 선택하여 일정 빈도를 지정하세요.
+

NOTE: 리소스 그룹을 생성하는 동안 백업 작업에 대한 일정(시작 날짜 및 종료 날짜)을 지정할 수 있습니다.  이를 통해 동일한 정책과 백업 빈도를 공유하는 리소스 그룹을 만들 수 있지만, 각 정책에 다른 백업 일정을 할당할 수도 있습니다.

+

NOTE: 오전 2시로 예약한 경우, 일광 절약 시간제(DST) 기간에는 일정이 실행되지 않습니다.

.. 데이터 스냅샷 보존 설정 섹션에서 백업 유형 페이지에서 선택한 백업 유형과 일정 유형에 대한 보존 설정을 지정합니다.
+
|===


| 만약 당신이 원한다면... | 그 다음에... 


 a| 
특정 수의 스냅샷을 보관하세요
 a| 
*보관할 사본*을 선택한 다음 보관하려는 스냅샷 수를 지정합니다.

스냅샷 수가 지정된 수를 초과하면 스냅샷이 삭제되고 가장 오래된 사본이 먼저 삭제됩니다.


NOTE: 최대 보존 값은 1018입니다. 보존 기간이 기본 ONTAP 버전에서 지원하는 것보다 높은 값으로 설정된 경우 백업이 실패합니다.


IMPORTANT: SnapVault 복제를 활성화하려면 보존 횟수를 2 이상으로 설정해야 합니다.  보존 횟수를 1로 설정하면 새 스냅샷이 대상에 복제될 때까지 첫 번째 스냅샷이 SnapVault 관계에 대한 참조 스냅샷이 되기 때문에 보존 작업이 실패할 수 있습니다.



 a| 
스냅샷을 특정 일수 동안 보관하세요
 a| 
*사본 보관 기간*을 선택한 다음, 스냅샷을 삭제하기 전에 보관할 일수를 지정합니다.



 a| 
스냅샷 복사 잠금 기간
 a| 
*스냅샷 복사 잠금 기간*을 선택하고 기간을 일, 월 또는 년 단위로 지정합니다.

SnapLock 보존 기간은 100년 미만이어야 합니다.

|===
.. 보관 로그 스냅샷 보존 설정 섹션에서 백업 유형 페이지에서 선택한 백업 유형과 일정 유형에 대한 보존 설정을 지정합니다.
+
|===


| 만약 당신이 원한다면... | 그 다음에... 


 a| 
특정 수의 스냅샷을 보관하세요
 a| 
*보관할 사본*을 선택한 다음 보관하려는 스냅샷 수를 지정합니다.

스냅샷 수가 지정된 수를 초과하면 스냅샷이 삭제되고 가장 오래된 사본이 먼저 삭제됩니다.


NOTE: 최대 보존 값은 1018입니다. 보존 기간이 기본 ONTAP 버전에서 지원하는 것보다 높은 값으로 설정된 경우 백업이 실패합니다.


IMPORTANT: SnapVault 복제를 활성화하려면 보존 횟수를 2 이상으로 설정해야 합니다.  보존 횟수를 1로 설정하면 새 스냅샷이 대상에 복제될 때까지 첫 번째 스냅샷이 SnapVault 관계에 대한 참조 스냅샷이 되기 때문에 보존 작업이 실패할 수 있습니다.



 a| 
스냅샷을 특정 일수 동안 보관하세요
 a| 
*사본 보관 기간*을 선택한 다음, 스냅샷을 삭제하기 전에 보관할 일수를 지정합니다.



 a| 
스냅샷 복사 잠금 기간
 a| 
*스냅샷 복사 잠금 기간*을 선택하고 기간을 일, 월 또는 년 단위로 지정합니다.

SnapLock 보존 기간은 100년 미만이어야 합니다.

|===
.. 정책 라벨을 선택하세요.
+

NOTE: 원격 복제를 위해 기본 스냅샷에 SnapMirror 레이블을 할당하면 기본 스냅샷이 SnapCenter 에서 ONTAP 보조 시스템으로 스냅샷 복제 작업을 오프로드할 수 있습니다. 정책 페이지에서 SnapMirror 또는 SnapVault 옵션을 활성화하지 않고도 이 작업을 수행할 수 있습니다.



. 보조 복제 옵션 선택 섹션에서 다음 보조 복제 옵션 중 하나 또는 둘 다를 선택합니다.
+

NOTE: *보조 스냅샷 복사 잠금 기간*에 대한 보조 복제 옵션을 선택해야 적용됩니다.

+
|===
| 이 분야에서는... | 이렇게 하세요... 


 a| 
로컬 스냅샷을 생성한 후 SnapMirror 업데이트
 a| 
다른 볼륨에 백업 세트의 미러 복사본을 생성하려면 이 필드를 선택합니다(SnapMirror 복제).

SnapMirror Active Sync의 경우 이 옵션을 활성화해야 합니다.

2차 복제 중에 SnapLock 만료 시간은 기본 SnapLock 만료 시간을 로드합니다.

토폴로지 페이지에서 *새로 고침* 버튼을 클릭하면 ONTAP 에서 검색된 보조 및 기본 SnapLock 만료 시간이 새로 고침됩니다.



 a| 
로컬 스냅샷을 생성한 후 SnapVault 업데이트
 a| 
디스크 간 백업 복제(SnapVault 백업)를 수행하려면 이 옵션을 선택하세요.

ONTAP 에서 SnapLock Vault로 알려진 보조 노드에만 SnapLock 구성된 경우 토폴로지 페이지에서 *새로 고침* 버튼을 클릭하면 ONTAP 에서 검색된 보조 노드의 잠금 기간이 새로 고침됩니다.

SnapLock Vault에 대한 자세한 내용은 다음을 참조하세요. https://docs.netapp.com/us-en/ontap/snaplock/commit-snapshot-copies-worm-concept.html["볼트 대상의 WORM에 스냅샷 복사본 커밋"]

보다 link:../protect-sco/task_view_oracle_databse_backups_and_clones_in_the_topology_page.html["토폴로지 페이지에서 Oracle 데이터베이스 백업 및 복제본 보기"] .



 a| 
오류 재시도 횟수
 a| 
작업이 중지되기 전에 허용할 수 있는 최대 복제 시도 횟수를 입력하세요.

|===
+

NOTE: 보조 저장소의 스냅샷 최대 한도에 도달하지 않도록 하려면 ONTAP 에서 보조 저장소 SnapMirror 보존 정책을 구성해야 합니다.

. 스크립트 페이지에서 백업 작업 전이나 후에 실행할 프리스크립트나 포스트스크립트의 경로와 인수를 각각 입력합니다.
+
사전 스크립트와 사후 스크립트는 _/var/opt/snapcenter/spl/scripts_ 또는 이 경로 내부의 폴더에 저장해야 합니다.  기본적으로 _/var/opt/snapcenter/spl/scripts_ 경로가 채워집니다.  이 경로 내에 스크립트를 저장하기 위한 폴더를 만든 경우 경로에 해당 폴더를 지정해야 합니다.

+
스크립트 시간 초과 값을 지정할 수도 있습니다. 기본값은 60초입니다.

+
SnapCenter 사용하면 프리스크립트와 포스트스크립트를 실행할 때 미리 정의된 환경 변수를 사용할 수 있습니다.link:../protect-sco/predefined-environment-variables-prescript-postscript-backup.html["자세히 알아보기"^]

. 확인 페이지에서 다음 단계를 수행하세요.
+
.. 검증 작업을 수행할 백업 일정을 선택합니다.
.. 검증 스크립트 명령 섹션에서 검증 작업 전이나 후에 실행할 프리스크립트나 포스트스크립트의 경로와 인수를 각각 입력합니다.
+
사전 스크립트와 사후 스크립트는 _/var/opt/snapcenter/spl/scripts_ 또는 이 경로 내부의 폴더에 저장해야 합니다.  기본적으로 _/var/opt/snapcenter/spl/scripts_ 경로가 채워집니다.  이 경로 내에 스크립트를 저장하기 위한 폴더를 만든 경우 경로에 해당 폴더를 지정해야 합니다.

+
스크립트 시간 초과 값을 지정할 수도 있습니다. 기본값은 60초입니다.



. 요약을 검토한 후 *마침*을 클릭하세요.

